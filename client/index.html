<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Symposium</title>
  <link rel="stylesheet" href="/css/variables.css">
  <link rel="stylesheet" href="/css/reset.css">
  <link rel="stylesheet" href="/css/layout.css">
  <link rel="stylesheet" href="/css/typography.css">
  <link rel="stylesheet" href="/css/input.css">
  <link rel="stylesheet" href="/css/convo.css">
  <link rel="stylesheet" href="/css/manage.css">
  <link rel="stylesheet" href="/css/modals.css">
  <link rel="stylesheet" href="/css/completion.css">
  <!-- Feather Icons -->
  <script src="https://unpkg.com/feather-icons"></script>
</head>
<body>
  <div id="app">
    <!-- Main Area -->
    <main id="main-area">
      <!-- Convo View -->
      <section id="convo-view" class="view active">
        <!-- Convo Header -->
        <header class="convo-header">
          <nav class="breadcrumb">
            <button class="breadcrumb-item" data-type="project">
              <span class="breadcrumb-label">Research Project</span>
            </button>
            <span class="breadcrumb-separator">›</span>
            <button class="breadcrumb-item" data-type="convo">
              <span class="breadcrumb-label">API Design Discussion</span>
            </button>
            <span class="breadcrumb-separator">›</span>
            <button class="breadcrumb-item" data-type="branch">
              <span class="breadcrumb-label">main</span>
            </button>
          </nav>
          <button id="active-context-btn" class="icon-btn" title="Active Context">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
            <span class="context-count">3</span>
          </button>
        </header>

        <!-- Messages Container -->
        <div class="messages-container" id="messages-container">
          <!-- Messages will be rendered here -->
        </div>
      </section>

      <!-- Manage View -->
      <section id="manage-view" class="view">
        <!-- Generated UI Overlay -->
        <div id="generated-ui-overlay" class="hidden">
          <!-- LLM-generated form will appear here -->
        </div>

        <!-- Main Tab Navigation (icons with expanding labels) -->
        <div class="main-nav">
          <nav class="main-tabs" id="main-tabs">
            <button class="main-tab active" data-tab="library" title="Library">
              <i data-feather="book-open"></i>
              <span class="tab-label">Library</span>
            </button>
            <button class="main-tab" data-tab="collections" title="Collections">
              <i data-feather="layers"></i>
              <span class="tab-label">Collections</span>
            </button>
            <button class="main-tab" data-tab="scheduler" title="Scheduler">
              <i data-feather="clock"></i>
              <span class="tab-label">Scheduler</span>
            </button>
            <button class="main-tab" data-tab="integrations" title="Integrations">
              <i data-feather="box"></i>
              <span class="tab-label">Integrations</span>
            </button>
            <button class="main-tab" data-tab="subscriptions" title="Subscriptions">
              <i data-feather="download-cloud"></i>
              <span class="tab-label">Subscriptions</span>
            </button>
            <button class="main-tab" data-tab="organizations" title="Organizations">
              <i data-feather="globe"></i>
              <span class="tab-label">Organizations</span>
            </button>
          </nav>
        </div>

        <!-- Sub-Tab Navigation (conditional) -->
        <div class="sub-nav" id="sub-nav">
          <nav class="sub-tabs" id="sub-tabs">
            <!-- Sub-tabs rendered dynamically -->
          </nav>
        </div>

        <!-- Resource Content -->
        <div class="resource-content" id="resource-content">
          <!-- Resource list will be rendered here -->
        </div>
      </section>
    </main>

    <!-- Completion Helper -->
    <div id="completion-helper" class="completion-helper hidden">
      <div class="completion-header">
        <span class="completion-path"></span>
        <input 
          type="text" 
          id="completion-search" 
          class="completion-search hidden" 
          placeholder="Search..."
          autocomplete="off"
        />
      </div>
      <ul class="completion-list">
        <!-- Completion options will be rendered here -->
      </ul>
    </div>

    <!-- Input Area -->
    <footer id="input-area">
      <!-- Input Controls -->


      <!-- Input Field -->
      <div class="input-wrapper">
        <div class="input-highlight" id="input-highlight"></div>
        <textarea 
          id="input-field" 
          placeholder="Type a message or use @/ to target context, #/ for operations..."
          rows="1"
        ></textarea>
        <button id="send-btn" class="send-btn" disabled>
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="22" y1="2" x2="11" y2="13"/>
            <polygon points="22 2 15 22 11 13 2 9 22 2"/>
          </svg>
        </button>
      </div>

            <div class="input-controls">
        <div class="mode-toggle">
          <button id="mode-convo" class="mode-btn active" title="Conversation Mode">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
            </svg>
          </button>
          <button id="mode-manage" class="mode-btn" title="Manage Mode">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="3" width="7" height="7"/>
              <rect x="14" y="3" width="7" height="7"/>
              <rect x="14" y="14" width="7" height="7"/>
              <rect x="3" y="14" width="7" height="7"/>
            </svg>
          </button>
        </div>

        <div class="input-actions">
          <button id="model-toggle" class="model-btn" title="Toggle Model">
            <span class="model-label">Std</span>
          </button>
          <button id="model-settings-btn" class="icon-btn" title="Model Settings">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Manage Mode Error -->
      <div id="manage-error" class="manage-error hidden">
        <span class="error-icon">!</span>
        <span class="error-text">Operation required. Use #/ to define an operation.</span>
      </div>
    </footer>

    <!-- Modals -->
    <div id="modal-overlay" class="modal-overlay hidden">
      <!-- Model Settings Modal -->
      <div id="model-settings-modal" class="modal hidden">
        <div class="modal-header">
          <h2>Model Settings</h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-content">
          <div class="setting-group">
            <label>Standard Mode</label>
            <select id="model-standard">
              <option value="gpt-4o-mini">GPT-4o Mini</option>
              <option value="gpt-4o">GPT-4o</option>
              <option value="claude-3-haiku">Claude 3 Haiku</option>
              <option value="claude-3.5-sonnet">Claude 3.5 Sonnet</option>
            </select>
            <p class="setting-hint">Used for quick responses and simple tasks</p>
          </div>
          <div class="setting-group">
            <label>High Mode</label>
            <select id="model-high">
              <option value="gpt-4o">GPT-4o</option>
              <option value="claude-3.5-sonnet" selected>Claude 3.5 Sonnet</option>
              <option value="claude-3-opus">Claude 3 Opus</option>
            </select>
            <p class="setting-hint">Used for complex analysis and detailed responses</p>
          </div>
        </div>
      </div>

      <!-- Active Context Modal -->
      <div id="active-context-modal" class="modal hidden">
        <div class="modal-header">
          <h2>Active Context</h2>
          <button class="modal-close">&times;</button>
        </div>
        <div class="modal-content">
          <p class="modal-description">Select collections to include as active context for this conversation.</p>
          <div id="collections-list" class="collections-list">
            <!-- Collections will be rendered here -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/js/app.js"></script>
</body>
</html>
